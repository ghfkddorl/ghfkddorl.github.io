<!doctype html>
<html>
	<head>
		<title>반복문을 직관적으로(1) //  &lt; 프로그래밍 일기장 &gt; </title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="" />
		<link rel="stylesheet" href="https://ghfkddorl.github.io/css/main.min.5727d71b28c5181ab39a55314ff63e7b717b9eb8f492f73053fa5416e0a054c0.css" />

		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
		MathJax.Hub.Config({
		  tex2jax: {
			inlineMath: [['$','$'], ['\\(','\\)']],
			displayMath: [['$$','$$'], ['\[','\]']],
			processEscapes: true,
			processEnvironments: true,
			skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
			ignoreClass: ["gist-file"],
			TeX: { equationNumbers: { autoNumber: "AMS" },
				 extensions: ["AMSmath.js", "AMSsymbols.js"] }
		  }
		});
		</script>

		<script>
			function toggle(id) {
				style = document.getElementById(id).style
				if ( style.display == "block" ) { style.display = "none" }
				else { style.display = "block" }
			}

			function ctrl_header(event){
				header = document.getElementById("app-header")
				scroll_down = (0 <= event.deltaY)
			}
			
			var __opened_menu__
			function open_sub_menu(menu_item, title){
				menu = document.getElementById("sub-menu-id-" + title);
				style = menu.style
				if ( __opened_menu__ ) {
					if ( __opened_menu__ == menu ) {
						if ( style.display == 'none' ) {
							style.display = 'block'
						} else {
							style.display = 'none'
						}
					} else {
						__opened_menu__.style.display = 'none';
						style.display = 'block';
						__opened_menu__ = menu;
					}
				} else {
					style.display = 'block';
					__opened_menu__ = menu;
				}

			}
		</script>
	</head>

	<body>
		<header id="app-header">

			<div class="menu-btn"
				onclick="toggle(&quot;app-menu&quot;)">
				<img class="icon" src="../../img/menu.png">
			</div>

			<img class="profile-icon" src="../../img/profile.jpg"/>
			<div class="profile-text"> &lt; 프로그래밍 일기장 &gt; </div>
		</header>

		<div id="app-menu">
		<div class="root-menu">
		

			<div class="item" onclick="open_sub_menu(this, &#34;Hugo&#34;)">

			<div class="text">Hugo</div>
				
			</div>

			<div class="menu" id="sub-menu-id-Hugo">
			

				<a class="item" href=../../hugo/post1/>
					<div class="text">마크마운 : 코드 넣기</div>
					
				</a>

			

				<a class="item" href=../../hugo/post2/>
					<div class="text">마크다운 : 수식 넣기</div>
					
				</a>

			
			</div>


			

			<div class="item" onclick="open_sub_menu(this, &#34;Python&#34;)">

			<div class="text">Python</div>
				
			</div>

			<div class="menu" id="sub-menu-id-Python">
			

				<a class="item" href=../../python/post2/>
					<div class="text">반복문을 직관적으로(2)</div>
					
				</a>

			

				<a class="item" href=../../python/post3/>
					<div class="text">반복문을 직관적으로(3)</div>
					
				</a>

			

				<a class="item" href=../../python/post1/>
					<div class="text">반복문을 직관적으로(1)</div>
					
				</a>

			
			</div>


			
			</div>
			</div>

		<main id="app-content">
			<div class="content-wrap">
			
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">반복문을 직관적으로(1)</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Apr 6, 2019
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          3 min read
        </div></div>
    </header>

    
    <div class="post-content">
      

<h2 id="1-이터러블-iterable-이터레이터-iterator">1. 이터러블(iterable), 이터레이터(iterator)</h2>

<p>code =</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span><span style="color:#66d9ef">for</span> string <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;hello&#39;</span>, <span style="color:#e6db74">&#39;thank you&#39;</span>, <span style="color:#e6db74">&#39;and you&#39;</span>]:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span>    <span style="color:#66d9ef">print</span>(string)</code></pre></div>
<p>result =</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span><span style="color:#e6db74">&#39;hello&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span><span style="color:#e6db74">&#39;thank you&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3</span><span style="color:#e6db74">&#39;and you&#39;</span></code></pre></div>
<p>위 코드는 파이썬을 이용한 간단한 반복문 입니다. 파이썬에서 반복문은 <code>for in</code>문과 <code>while</code>문이 있습니다. 그 중 <code>for in</code>문은 뒤에 <code>list</code>, <code>range</code>, <code>tuple</code>, <code>set</code>, <code>dictionary</code> 등이 옵니다. 그리고 반복문 안에서 해당 객체 안에 든 값을 차례대로 받습니다. 위 코드에서는 &ldquo;hello&rdquo;, &ldquo;thank you&rdquo;, &ldquo;and you&rdquo; 값을 차례대로 받았습니다. 이렇게 객체 안의 값을 차례대로 받는 것을 객체를 <u>순환한다</u>고(iterate) 합니다. 그리고 이렇게 받은 값을 <u>순환값</u>, 순환 가능한 객체를 <u>이터러블(iterable)</u> 이라고 합니다.</p>

<p>이터러블을 언어적 수준에서 지원해 주지 않는 다른 언어를 먼저 접하신 분들이라면 이터러블을 처음 접했을 시 정말 놀랐을 겁니다(저는 그랬습니다.). 이터러블은 코드를 정말 직관적이고 짧게 만들어 줍니다. 그리고 이터러블을 지원하는 다른 언어들이 그렇듯이 파이썬 또한 이터러블 객체를 직접 만들 수 있습니다. 그렇기 위해서 우선 <code>for in</code>문에서 객체를 어떻게 순환하는지 알아야 합니다.</p>

<p>우선 <code>for in</code>문은 순환할 객체의 <code>__iter__</code> 메소드를 호출합니다. <code>__iter__</code>메소드는 <code>__next__</code> 메소드를 가지고 있는 객체를 반환합니다. 이렇게 반환된 객체는 반복문이 반복될때마다 <code>__next__</code> 메소드를 호출합니다. 그리고 <code>__next__</code> 메소드의 반환값이 순환값으로 사용됩니다. 이터레이터는 더이상 순환할 값이 없을 경우 <code>StopIteration</code> 에러를 일으킵니다. <code>for in</code> 문은 이를 감지하고 반복문을 마칩니다.</p>

<p>즉, 파이썬에서 이터러블 객체는 <code>__iter__</code> 이 정의된 객체를 말합니다. 그리고 <code>__next__</code> 이 정의된 객체를 <u>이터레이터</u>라고 합니다. 이는 상속구조로 정의되는 것이 아니라 메소드의 유무로 결정되는 덕타이핑(duck-typing) 입니다. 이 과정에 맞추어 흔히들 쓰는 ragne 클래스를 구현하면 다음과 같습니다.</p>

<p>code =</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 1</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRange</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 2</span>	<span style="color:#66d9ef">def</span> __init__(self, max):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 3</span>		self<span style="color:#f92672">.</span>max
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 5</span>	<span style="color:#66d9ef">def</span> __iter__(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 6</span>		<span style="color:#66d9ef">return</span> MyRangeIterator(self<span style="color:#f92672">.</span>max)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 8</span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyRangeIterator</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79"> 9</span>	<span style="color:#66d9ef">def</span> __init__(self, num):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">10</span>		self<span style="color:#f92672">.</span>max <span style="color:#f92672">=</span> max
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">11</span>		self<span style="color:#f92672">.</span>current <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">12</span>	
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">13</span>	<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__next__</span>(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">14</span>		self<span style="color:#f92672">.</span>current <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">15</span>		<span style="color:#66d9ef">if</span> self<span style="color:#f92672">.</span>current <span style="color:#f92672">&gt;=</span> num:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">16</span>			<span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">StopIteration</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">17</span>		<span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>current
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">18</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">19</span>	<span style="color:#66d9ef">def</span> __iter__(self):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">20</span>		<span style="color:#66d9ef">return</span> self
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">21</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">22</span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> MyRange(<span style="color:#ae81ff">5</span>):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">23</span>	<span style="color:#66d9ef">print</span>(i)</code></pre></div>
<p>result =</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span><span style="color:#ae81ff">0</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span><span style="color:#ae81ff">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3</span><span style="color:#ae81ff">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">4</span><span style="color:#ae81ff">3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">5</span><span style="color:#ae81ff">4</span></code></pre></div>
<p>코드를 보시면 아시겠지만 <code>__next__</code>메소드가 <code>StopIteration</code>을 일으키면 이터레이터 객체는 더 이상 값을 순환하지 않습니다. 즉 사용하는 의미가 없어집니다. 재사용이 불가능합니다. 한번더 값을 순환하고 싶으면 이터러블로 부터 새로운 이터레이터를 얻어야 합니다. 그렇기 때문에 순환하는 특징이 필요한 클래스는 이터레이터가 아닌 이터러블을 전달값을 받고 받은 이터러블에서 이터레이터를 얻습니다.</p>

<p>또 다른 특징으로는 이터레이터 또한 <code>__iter__</code> 메소드가 정의되어있고 스스로를 반환합니다. 이는 위에서 말한 순환하는 특징이 필요한 클래스에 이터레이터 객체도 사용할 수 있게 해줍니다. 또한 이러한 특징을 필요로 하는 클래스는 대부분 이터레이터 입니다. 이는 다음과 같은 사용을 가능하게 해줍니다.</p>

<p>code =</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span><span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> filter(<span style="color:#66d9ef">lambda</span> i, x: i <span style="color:#f92672">%</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>, enumerate(range(<span style="color:#ae81ff">6</span>))):
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span>    <span style="color:#66d9ef">print</span>(i)</code></pre></div>
<p>result =</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">1</span><span style="color:#ae81ff">0</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">2</span><span style="color:#ae81ff">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7c7c79">3</span><span style="color:#ae81ff">4</span></code></pre></div>
<h2 id="2-마치며">2. 마치며</h2>

<p>위에서 말한 <code>list</code>, <code>range</code>, <code>tuple</code>, <code>set</code>, <code>dictionary</code> 또한 이터러블 객체입니다.
또한 문자열도 이터러러블 객체이며 문자를 순환합니다.</p>

    </div>
  </article>


			</div>
		</main>
	</body>

</html>
